@page "/planscadres/{id}/confirmation"
@attribute [Authorize]
@inject  PCU001Context context

<!--style propre à la page il ne sert à rien d'autre.-->
<style>
.full-height{font-family:Nunito,sans-serif;height:75vh}.flex-center{align-items:center;display:flex;justify-content:center}.position-ref{position:relative}.top-right{position:absolute;right:10px;top:18px}.content{text-align:center}.title{font-size:35px}
</style>

<!-- Formulaire d'une nouvelle compétences -->
<div class="container shadow p-5">
    <div class="row">
        <!-- Sélection d'un département pour la compétence -->
        <div class="col-12 text-center">
            @if (IsFound)
            {
                <h4 style="">Le plan cadre est maintenant soumis.</h4>
                <img class="p-5" src="/images/confirmation.png" height="200" width="200" />              
            }
            else if (IsFinishLoading)
            {
                <div class="flex-center position-ref full-height">
                    <div class="content">
                        <div class="title m-b-md">
                            <p>Une erreur est survenue.</p>
                        </div>
                    </div>
                </div>
            }
            <p>
                <a href="/">Retourner à l'accueil</a>
            </p>
        </div>
    </div>
</div>

@code{
    [Parameter]
    public string id { get; set; }
    protected bool IsFound;
    protected bool IsFinishLoading;
    protected PlansCadres CoursTemplate;

    // initialise le plan cadre donné par le id soumis en paramètre et 
    // vérifie s'il existe bel et bien sinon un message d'erreur lui est renvoyé
    protected override void OnInitialized()
    {
        CoursTemplate = context.PlansCadres.FirstOrDefault(e=> e.CoursId == id);
        // signalise à l'utilisateur si le plandre a été trouvé
        if(CoursTemplate != null)
            IsFound = true;
        IsFinishLoading = true;
    }
}