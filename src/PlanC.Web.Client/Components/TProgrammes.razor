@using PlanC.WebApi.Server.DataAccess
@using PlanC.WebApi.Models
@using Syncfusion.EJ2.Blazor
@using Syncfusion.EJ2.Blazor.Grids
@using Syncfusion.EJ2.Blazor.Data
@* les cdn(s) doivent être ajoutés pour le bon fonctionnement du componant *@

@if (Pgms == null)
{
    <p><em>En cours de chargement...</em></p>
}
else
{
    <!-- Module table des départements -->
    <EjsGrid DataSource="Pgms" TValue="Tpgm" AllowPaging="true" Locale="fr-FR" Toolbar="@(new[] { "Add", "Edit", "Delete", "Cancel", "Update" })">
        <GridEditSettings AllowAdding="true" AllowEditing="true" AllowDeleting="true" Mode="EditMode.Normal"></GridEditSettings>
        <GridColumns>
            <GridColumn Field=@nameof(Tpgm.PgmTitle) HeaderText="Titre de l'élément" TextAlign="TextAlign.Right" Width="130"></GridColumn>
            <GridColumn Field=@nameof(Tpgm.PgmDesc) HeaderText="Description" TextAlign="TextAlign.Right" Width="200"></GridColumn>
        </GridColumns>
    </EjsGrid>
}

@code {
    // context de la base de données
    private readonly PCU001Context _context = new PCU001Context();
    
    public List<Department> Dpt = PlanC.Web.Client.Data.PCU001FakeContext.Departments;
    public List<Tpgm> Pgms = PlanC.Web.Client.Data.PCU001FakeContext.programmes;

}
